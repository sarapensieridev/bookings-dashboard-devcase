# 1. Create a comprehensive .gitignore
cat > .gitignore << 'EOF'
# Dependencies
node_modules/
package-lock.json
yarn.lock
/.pnp
.pnp.js

# Environment variables
.env
.env.local
.env.*.local
backend/.env

# Production builds
/frontend/build
/build

# Testing
/coverage

# Misc
.DS_Store
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# IDEs
.idea/
.vscode/
*.swp
*.swo

# OS
Thumbs.db
EOF

# 2. Remove cached files from git
git rm -r --cached node_modules/
git rm -r --cached frontend/node_modules/
git rm -r --cached backend/node_modules/
git rm --cached package-lock.json
git rm --cached backend/package-lock.json
git rm --cached frontend/package-lock.json

# 3. Commit the changes
git add .gitignore
git commit -m "Add .gitignore and remove node_modules and secrets"

# 4. Force push (since you rewrote history anyway)
git push -u origin master --force